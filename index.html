<style>
    /* ... stávající styly ... */
    .hype-row { width: 100%; display: flex; align-items: center; gap: 8px; margin-top: 5px; background: rgba(255,69,0,0.05); padding: 4px 8px; border-radius: 4px; border: 1px solid rgba(255,69,0,0.1); }
    .hype-label { font-size: 0.55rem; color: #ff4500; font-weight: 800; text-transform: uppercase; }
    .hype-bar-bg { flex: 1; height: 4px; background: #222; border-radius: 2px; overflow: hidden; }
    .hype-bar-fill { height: 100%; background: linear-gradient(90deg, #ff4500, #ff8c00); transition: width 0.5s ease; }
    .hype-val { font-size: 0.6rem; font-weight: bold; color: #ff4500; min-width: 25px; text-align: right; }
</style>

<script>
async function updateData() {
    try {
        const pRes = await fetch(`https://min-api.cryptocompare.com/data/pricemultifull?fsyms=${assets.join(',')}&tsyms=USD`);
        const pJson = await pRes.json();
        
        // 1. Verdikty
        const dbRes = await fetch(`${SB_URL}/rest/v1/oracle_signals?timeframe=eq.${selectedTF}`, {
            headers: { 'apikey': SB_KEY, 'Authorization': `Bearer ${SB_KEY}` }
        });
        const dbData = await dbRes.json();

        // 2. Hype data
        const hRes = await fetch(`${SB_URL}/rest/v1/oracle_hype`, {
            headers: { 'apikey': SB_KEY, 'Authorization': `Bearer ${SB_KEY}` }
        });
        const hData = await hRes.json();

        const grid = document.getElementById('grid');
        let html = "";

        for (const sym of assets) {
            const raw = pJson.RAW[sym].USD;
            const db = dbData.find(d => d.symbol === sym) || { verdict: 'HOLD', confidence: 0 };
            const hype = hData.find(h => h.symbol === sym) || { score: 50 };
            
            const hRes2 = await fetch(`https://min-api.cryptocompare.com/data/v2/histo${curType}?fsym=${sym}&tsym=USD&limit=${curLimit}`);
            const hJson = await hRes2.json();
            const oldPrice = hJson.Data.Data[0].close;
            const diff = ((raw.PRICE - oldPrice) / oldPrice) * 100;

            const trendClass = diff >= 0 ? 'trend-up' : 'trend-down';
            const v = db.verdict.toUpperCase();

            html += `
                <div class="card ${v.toLowerCase()}">
                    <span class="coin-name">${sym === 'PI' ? 'PI NETWORK' : (sym === 'M' ? 'MEMECORE' : sym)}</span>
                    <span class="coin-price">$${raw.PRICE.toFixed(4)}</span>
                    
                    <div class="hype-row">
                        <span class="hype-label">HYPE</span>
                        <div class="hype-bar-bg"><div class="hype-bar-fill" style="width: ${hype.score}%"></div></div>
                        <span class="hype-val">${hype.score}%</span>
                    </div>

                    <div class="status-row">
                        <div class="indicator ${trendClass}">${diff >= 0 ? 'VZESTUP' : 'POKLES'}<br>${diff.toFixed(2)}%</div>
                        <div class="main-verdict" style="color:var(--${v.toLowerCase()})">
                            ${v}<br>
                            <span style="font-size:0.5rem; opacity:0.6;">${db.confidence}% ACC</span>
                        </div>
                        <div class="indicator" style="color:#555">OBJEM<br>${formatVol(raw.VOLUME24HOURTO)}</div>
                    </div>
                </div>
            `;
        }
        grid.innerHTML = html;
    } catch (e) {}
}
</script>